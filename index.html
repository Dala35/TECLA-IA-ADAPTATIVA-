<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TECLA - IA Adaptativa</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f4; color:#333; }
    header{ background:#111; color:#fff; padding:20px; text-align:center; }
    .container { padding:20px; }
    .button{ padding:10px 15px; margin:10px 5px; border:none; border-radius:8px; cursor:pointer; background:#2d89ef; color:#fff; font-size:16px; }
    .button:hover{ background:#1b5fbf; }
    .emoji-panel { display:none; margin-top:15px; flex-wrap:wrap; }
    .emoji { font-size:28px; margin:5px; cursor:pointer; }
    .chat-box { background:#fff; padding:15px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); margin-top:15px; max-height:200px; overflow-y:auto; }
    input, textarea{ width:100%; padding:10px; margin-top:8px; border:1px solid #ccc; border-radius:6px; }
    #uploadForm{ display:none; margin-top:15px; background:#fff; padding:15px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    .msg-user{ color:#2d89ef; margin:5px 0; }
    .msg-ia{ color:#111; margin:5px 0; }
  </style>
</head>
<body>
  <header><h1>🤖 TECLA – IA Adaptativa</h1></header>
  <div class="container">
    <button class="button" onclick="toggleEmojis()">🧩 Emojis</button>
    <button class="button" onclick="toggleUpload()">📤 Ensinar IA</button>

    <div id="emojiPanel" class="emoji-panel">
      <span class="emoji">😊</span>
      <span class="emoji">🍽️</span>
      <span class="emoji">🚽</span>
      <span class="emoji">🏃</span>
      <span class="emoji">😢</span>
      <span class="emoji">🛏️</span>
      <span class="emoji">📖</span>
      <span class="emoji">🎵</span>
      <span class="emoji">⚽</span>
      <span class="emoji">❤️</span>
    </div>

    <div id="uploadForm">
      <h3>📚 Ensinar à IA</h3>
      <textarea id="textTeach" rows="3" placeholder="Escreve aqui..."></textarea>
      <button class="button" onclick="teachText()">Guardar Texto</button>
    </div>

    <div class="chat-box" id="chatBox">
      <p class="msg-ia"><strong>TECLA:</strong> Olá! Estou aqui para aprender e conversar contigo. ✨</p>
    </div>

    <input type="text" id="userInput" placeholder="Escreve uma mensagem" />
    <button class="button" onclick="sendMessage()">Enviar</button>
  </div>

  <script>
    // Visuais
    function toggleEmojis(){
      const p = document.getElementById("emojiPanel");
      p.style.display = p.style.display==="flex"?"none":"flex";
    }
    function toggleUpload(){
      const f = document.getElementById("uploadForm");
      f.style.display = f.style.display==="block"?"none":"block";
    }

    // LocalStorage
    function teachText(){
      const txt = document.getElementById("textTeach").value.trim();
      if(!txt){alert("Escreve algo para me ensinar 😊"); return;}
      localStorage.setItem("teach", txt);
      alert("Guardei isso na minha memória! 🧠");
      document.getElementById("textTeach").value = "";
    }

    // Chat
    function sendMessage(){
      const inp = document.getElementById("userInput");
      const text = inp.value.trim();
      if(!text)return;
      const cb = document.getElementById("chatBox");

      cb.innerHTML += `<p class="msg-user"><strong>Tu:</strong> ${text}</p>`;

      // Resposta com base no que armazenou
      const learned = localStorage.getItem("teach");
      let resp = learned? `Grato por partilhares: "${learned}"` : "Ainda não aprendi nada. Usa 'Ensinar IA' para me dar conhecimento.";

      cb.innerHTML += `<p class="msg-ia"><strong>TECLA:</strong> ${resp}</p>`;
      inp.value="";
      cb.scrollTop = cb.scrollHeight;

      // Voz
      const utter = new SpeechSynthesisUtterance(resp);
      utter.lang = "pt-PT";
      window.speechSynthesis.speak(utter);
    }
  </script>
</body>
</html>
